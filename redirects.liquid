---
pagination:
  data: collections.en
  size: 1
  alias: collection
permalink: /{{ collection.url | removeLang }}
---

{% for lang in site.supportedLanguages %}
  {% assign URL = "/" | append: lang | append: collection.url | removeLang %}
  {%- if forloop.first -%}
    <if cookie="{{ 'lastLang is ' | append: lang }}">
      <redirect to="{{ URL | htmlBaseUrl }}" type="permanent" />
    </if>
  {%- else -%}
    <elseif cookie="{{ 'lastLang is ' | append: lang }}">
      <redirect to="{{ URL | htmlBaseUrl }}" type="permanent" />
    </elseif>
  {%- endif -%}
{%- endfor -%}

{%- for lang in site.supportedLanguages -%}
  {% assign URL = "/" | append: lang | append: collection.url | removeLang %}
  <elseif variable="{{ 'client.accept-language is ' | append: lang }}">
    <redirect to="{{ URL | htmlBaseUrl }}" type="permanent" />
  </elseif>
{%- endfor -%}

{% assign defaultURL = "/en" | append: collection.url | removeLang %}
<else>
  <redirect to="{{ defaultURL | htmlBaseUrl }}" type="permanent" />
</else>